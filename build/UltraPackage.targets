<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" DefaultTargets="Layout" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <LinuxDistrosNeedNativeInstaller>ubuntu.16.04-x64</LinuxDistrosNeedNativeInstaller>
    <SandBoxRoot>$(RepoRoot)/artifactsSandBox/$(LinuxDistrosNeedNativeInstaller)</SandBoxRoot>
  </PropertyGroup>

  <ItemGroup>
      <_RepoRootFiles Include="$(RepoRoot)\**\*.*" Exclude="$(RepoRoot)\artifactsSandBox\**\*.*;$(RepoRoot)\.git\**\*.*;$(RepoRoot)\.nuget\**\*.* " />
      <_SandBoxFiles Include="$(RepoRoot)/artifactsSandBox/$(LinuxDistrosNeedNativeInstaller)\**\*.*"/>
  </ItemGroup>


  <Target Name="UltraAll" DependsOnTargets="PackageWithDocker">

  </Target>

  <Target Name="PrepareSandBox" Inputs="@(_RepoRootFiles)" Outputs="@(_SandBoxFiles)">
    <Copy
      SourceFiles="@(_RepoRootFiles)"
      DestinationFolder="$(RepoRoot)/artifactsSandBox/$(LinuxDistrosNeedNativeInstaller)/%(RecursiveDir)"
      />
  </Target>

  <Target Name="PackageWithDocker" DependsOnTargets="PrepareSandBox">
    <Exec Command="$(RepoRoot)/artifactsSandBox/$(LinuxDistrosNeedNativeInstaller)/build.sh --skip-prereqs --configuration $(BuildConfiguration) --docker ubuntu.16.04"/>  
  </Target >
</Project>
